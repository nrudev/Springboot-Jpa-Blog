# 서비스가 필요한 이유
## 1. 트랜잭션 관리
트랜잭션 : 일이 처리되기 위한 가장 작은 단위.

<br/>

#### DB 격리 수준

**오라클**의 DB 격리수준 기본전략은 **READ COMMIT** 이다.
하나의 트랜잭션이 **특정 데이터를 SELECT 했을 때**, 다른 트랜잭션에서 그 데이터를 수정했다 해도, **COMMIT 하지 않았다면 변경되기 이전의 데이터를 가져온다.** DB에 데이터 변경 요청 쿼리(INSERT, UPDATE, DELETE)가 오면 DB의 undo 영역에 그 데이터를 보관하고, 그 undo 영역에서 데이터를 제공해주기 때문이다.

그러나 중간에 **데이터 수정 후 커밋하면 SELECT 했을 때 수정된 데이터가 보이게 된다.** *<u>트랜잭션이 시작 후 종료될 때까지 동일한 것을 SELECT 할 때마다 동일한 데이터가 반환되어야</u>* 하는데, COMMIT 후에는 다른 데이터를 가져오는 것을 **"부정합"**이라고 한다.

**MySQL** 에서의 DB 격리수준 기본전략은 **REPEATABLE READ** 이다.
REPEATABLE READ 는 **부정합이 발생하지 않는데**, 이는 트랜잭션에서 **SELECT 할 때, 자신의 트랜잭션 번호보다 앞선 undo 로그를 보고 SELECT를 진행**하기 때문이다.

스프링에서는 CRUD에서 데이터의 변경이 있는 C, U, D에 보통 ```@Transactional``` 을 붙여주는데 정합성을 위해서는 R(SELECT)에도 해당 어노테이션을 붙여주는 것이 바람직하다.



## 2. 서비스의 의미 때문
서비스는 두 개의 트랜잭션(작업)을 하나의 트랜잭션으로 묶는 것.

ex)  <송금 서비스>

A가 B에게 10,000원을 송금할 경우 해야하는 작업은 다음과 같다.

1. A의 금액에서 10,000원 차감
2. B의 금액에 10,000원 추가

두 작업을 모두 성공적으로 마치면 commit(작업완료), 둘 중 하나라도 실패하면 rollback(다시 원상복구) 해야 한다.
이렇게 두 작업을 하나의 작업으로 묶는 것이 "서비스"이다.

